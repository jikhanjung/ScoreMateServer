### **Next.js 프론트엔드 핵심 기능 구현 계획**

**날짜**: 2025-08-19  
**목적**: ScoreMateServer Next.js 프론트엔드의 초기 구현을 위한 핵심 기능 및 개발 계획 정의

---

## 1. 개요

모노레포 마이그레이션이 완료됨에 따라, 이제 Next.js를 사용하여 ScoreMateServer의 프론트엔드를 구축할 차례입니다. 이 문서는 초기 구현에 필요한 핵심 기능들을 정의하고, 개발 우선순위를 제시합니다.

## 2. 핵심 기능 및 개발 우선순위

### 2.1. 공통 기능 및 레이아웃 (기반 구축)

*   **기본 레이아웃**:
    *   전역 헤더 (로고, 내비게이션 링크)
    *   전역 푸터 (저작권, 기본 정보)
    *   반응형 디자인 고려 (모바일/태블릿/데스크톱)
*   **내비게이션**:
    *   주요 페이지로의 링크 (대시보드, 악보 라이브러리, 세트리스트, 업로드 등)
    *   인증 상태에 따른 내비게이션 항목 변경 (로그인/로그아웃 버튼, 사용자 프로필)
*   **인증 플로우**:
    *   **회원가입 페이지**: `POST /api/v1/auth/register` 연동
    *   **로그인 페이지**: `POST /api/v1/auth/login` 연동 (JWT 토큰 처리 및 저장)
    *   **로그아웃 기능**: JWT 토큰 제거
    *   **인증 상태 관리**: 전역적으로 사용자 인증 상태를 관리하고, 보호된 라우트 구현
*   **API 클라이언트 설정**:
    *   `axios` 또는 `fetch` API 기반의 공통 API 클라이언트 인스턴스 생성
    *   JWT 토큰을 포함한 인증 헤더 자동 추가
    *   에러 처리 및 응답 인터셉터 구현 (표준화된 백엔드 에러 응답 파싱)

### 2.2. 핵심 기능 (우선순위별 구현)

#### 1순위: Dashboard (대시보드)
*   **목표**: 사용자가 자신의 라이브러리 현황과 쿼터 사용량을 한눈에 파악할 수 있는 개요 페이지 제공
*   **연동 API**: `GET /api/v1/dashboard/`, `GET /api/v1/dashboard/quota_details/`
*   **주요 기능**:
    *   총 악보 수, 총 세트리스트 수 표시
    *   쿼터 사용량 (사용량/총량, 백분율) 시각화 (차트 활용)
    *   최근 활동 (주간 악보/세트리스트 추가)
    *   최신 악보 및 세트리스트 목록 (간단한 미리보기)
    *   쿼터 관련 권장 사항 표시 (대용량 파일, 쿼터 임박 등)

#### 2순위: Score Library (악보 라이브러리)
*   **목표**: 사용자가 자신의 악보들을 검색, 필터링, 정렬하여 관리할 수 있는 페이지 제공
*   **연동 API**: `GET /api/v1/scores/`
*   **주요 기능**:
    *   악보 목록 표시 (페이지네이션 적용)
    *   **고급 검색 UI**:
        *   텍스트 검색 (제목, 작곡가, 악기 편성 등)
        *   태그 필터링 (다중 선택 가능)
        *   파일 크기 범위 필터링
        *   페이지 수 범위 필터링
        *   날짜 필터링 (생성일, 수정일)
    *   **정렬 옵션**: 제목, 작곡가, 크기, 페이지 수, 생성일, 수정일, 랜덤 정렬
    *   악보 상세 페이지 (간단한 메타데이터 표시)

#### 3순위: Setlist Manager (세트리스트 관리)
*   **목표**: 사용자가 세트리스트를 생성, 편집, 관리하고, 악보를 추가/제거/재정렬할 수 있는 페이지 제공
*   **연동 API**: `GET/POST/PUT/DELETE /api/v1/setlists/`, `POST /api/v1/setlists/{id}/add_item/`, `DELETE /api/v1/setlists/{id}/items/{item_id}/`, `POST /api/v1/setlists/{id}/reorder_items/`, `POST /api/v1/setlists/{id}/duplicate/`
*   **주요 기능**:
    *   세트리스트 목록 표시
    *   세트리스트 생성/수정/삭제
    *   세트리스트 상세 페이지:
        *   세트리스트에 포함된 악보 목록 표시
        *   악보 추가 (라이브러리에서 검색하여 추가)
        *   악보 제거
        *   **드래그&드롭을 이용한 악보 순서 재정렬**
    *   세트리스트 복사 기능

#### 4순위: File Upload (파일 업로드)
*   **목표**: 사용자가 PDF 악보 파일을 안전하고 편리하게 업로드할 수 있는 UI 제공
*   **연동 API**: `POST /api/v1/files/upload-url/`, `POST /api/v1/files/upload-confirm/`, `POST /api/v1/files/upload-cancel/`
*   **주요 기능**:
    *   파일 선택 UI (드래그&드롭 지원)
    *   업로드 진행률 표시 (프로그레스바)
    *   업로드 전 파일 미리보기 (파일 이름, 크기, 타입)
    *   업로드 성공/실패 알림
    *   쿼터 초과, 파일 형식 오류 등 백엔드 에러 메시지 표시

## 3. 기술 스택

*   **프레임워크**: Next.js (App Router)
*   **언어**: TypeScript
*   **스타일링**: Tailwind CSS
*   **상태 관리/데이터 페칭**: `@tanstack/react-query` (또는 SWR)
*   **HTTP 클라이언트**: `axios` (또는 `fetch` API)
*   **UI 컴포넌트**: `@headlessui/react` (또는 Radix UI, Shadcn UI 등)
*   **차트 라이브러리**: `recharts` (대시보드 시각화용)
*   **드래그&드롭**: `@dnd-kit/core`, `@dnd-kit/sortable`

## 4. 다음 단계

이 계획에 따라 Next.js 프론트엔드 프로젝트 내에서 각 기능들을 구현하고, 백엔드 API와 연동하여 테스트를 진행합니다.
