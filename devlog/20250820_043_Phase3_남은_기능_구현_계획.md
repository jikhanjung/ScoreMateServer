# Phase 3 남은 기능 구현 계획

**작성일**: 2025년 8월 20일  
**작성자**: Claude Code Assistant  
**단계**: Phase 3 - 고급 기능 완성  

## 현재 상황 분석

### 완료된 기능 (042 문서)
- ✅ 고급 필터링 시스템
  - 텍스트, 범위, 날짜, 불린 필터
  - 태그 다중 선택
- ✅ 벌크 작업 시스템
  - 다중 선택, 일괄 태그 추가/제거
  - 세트리스트 일괄 추가
  - 일괄 삭제

### 남은 기능 (041 계획서 기준)
1. **PDF 미리보기** - Task 2
2. **사용자 설정 페이지** - Task 3
3. **테스트 구현** - Task 4

## 구현 전략

### 원칙
1. **점진적 접근**: 복잡한 기능은 단순한 버전부터 시작
2. **즉각적 가치 제공**: 사용자가 바로 체감할 수 있는 기능 우선
3. **기존 인프라 활용**: 이미 구현된 썸네일, API 최대 활용

### 우선순위 재조정
041 검토 문서의 제안에 따라:
- PDF 전체 뷰어는 복잡도가 높아 Phase 4로 연기
- 대신 썸네일 기반 간단 미리보기로 대체
- 사용자 설정은 필수 기능만 구현

## 상세 구현 계획

### Phase 3.4: 썸네일 미리보기 모달 (2-3시간)

#### 목표
악보를 다운로드하지 않고 빠르게 미리볼 수 있는 기능 제공

#### 구현 내용
1. **PreviewModal 컴포넌트**
   - 악보 카드 클릭 시 모달 표시
   - 썸네일 이미지 표시 (presigned URL)
   - 제목, 작곡가 정보 표시
   - 다운로드, 세트리스트 추가 버튼

2. **썸네일 로딩 처리**
   - 로딩 스피너
   - 썸네일 없는 경우 대체 UI
   - 에러 처리

3. **UX 개선**
   - ESC 키로 닫기
   - 외부 클릭으로 닫기
   - 부드러운 애니메이션

#### 기술 스택
- 기존 Modal 컴포넌트 재활용
- presigned URL API 활용
- Tailwind CSS 애니메이션

### Phase 3.5: 사용자 설정 페이지 (3-4시간)

#### 목표
사용자가 계정 정보를 확인하고 관리할 수 있는 페이지 제공

#### 구현 내용

1. **설정 페이지 라우트**
   - `/settings` 페이지 생성
   - 네비게이션 메뉴에 추가

2. **프로필 섹션**
   ```typescript
   interface UserProfile {
     email: string;
     username: string;
     created_at: string;
     plan: 'free' | 'basic' | 'pro';
   }
   ```
   - 읽기 전용 정보 표시
   - 이메일, 사용자명, 가입일

3. **스토리지 사용량 섹션**
   ```typescript
   interface StorageInfo {
     used_mb: number;
     quota_mb: number;
     percentage: number;
   }
   ```
   - 시각적 진행 바
   - 사용량/전체 용량 표시
   - 업그레이드 안내 (quota 초과 시)

4. **보안 섹션**
   - 비밀번호 변경 폼
   - 현재/새 비밀번호 입력
   - 유효성 검사

5. **UI/UX**
   - 탭 또는 섹션 구분
   - 반응형 레이아웃
   - 저장 성공/실패 피드백

#### API 연동
- `GET /api/v1/user/profile/` - 프로필 정보
- `GET /api/v1/dashboard/` - 스토리지 정보 (기존 활용)
- `POST /api/v1/auth/password/change/` - 비밀번호 변경 (필요시 백엔드 추가)

### Phase 3.6: 통합 및 테스트 (1-2시간)

#### 목표
새 기능들의 안정성 확보 및 기존 기능과의 원활한 통합

#### 구현 내용

1. **기능 테스트**
   - 미리보기 모달 동작 확인
   - 설정 페이지 폼 검증
   - API 연동 테스트

2. **통합 테스트**
   - 네비게이션 연결
   - 권한 체크
   - 에러 핸들링

3. **UX 개선**
   - 로딩 상태 최적화
   - 에러 메시지 개선
   - 반응 속도 최적화

## 구현 순서 및 일정

### Day 1 (오늘)
1. ✅ 구현 계획 문서 작성 (현재)
2. 🔄 썸네일 미리보기 모달 구현
3. 🔄 사용자 설정 페이지 기본 구조

### Day 2 (내일)
1. 사용자 설정 페이지 완성
2. API 연동 및 테스트
3. Phase 3 완료 보고서 작성

## 위험 요소 및 대응

### 기술적 위험
1. **CORS 이슈** (썸네일 로딩)
   - 대응: proxy API 활용 또는 백엔드 CORS 설정

2. **비밀번호 변경 API 부재**
   - 대응: 백엔드 API 추가 또는 Phase 4로 연기

3. **대용량 썸네일 로딩**
   - 대응: 이미지 최적화, lazy loading

### 일정 위험
- 예상보다 구현 시간 초과 시 → PDF 전체 뷰어는 Phase 4로 확정 연기

## 성공 지표

### 정량적 지표
- [ ] 썸네일 미리보기 로딩 시간 < 2초
- [ ] 설정 페이지 모든 섹션 구현
- [ ] 0개의 콘솔 에러

### 정성적 지표
- [ ] 직관적인 미리보기 UX
- [ ] 깔끔한 설정 페이지 UI
- [ ] 기존 기능과의 일관성

## 다음 단계
Phase 3 완료 후 Phase 4 계획:
- 전체 PDF 뷰어 (react-pdf)
- 고급 검색 기능
- 실시간 동기화
- 성능 최적화

---

**시작**: 썸네일 미리보기 모달 구현으로 즉시 착수