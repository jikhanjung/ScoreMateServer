# Next.js í”„ë¡ íŠ¸ì—”ë“œ êµ¬í˜„ ê³„íš ê°œì„ ë°©ì•ˆ

**ì‘ì„±ì¼**: 2025-08-19  
**ëª©ì **: [20250819_023_Next.js_í”„ë¡ íŠ¸ì—”ë“œ_í•µì‹¬_ê¸°ëŠ¥_êµ¬í˜„_ê³„íš.md](./20250819_023_Next.js_í”„ë¡ íŠ¸ì—”ë“œ_í•µì‹¬_ê¸°ëŠ¥_êµ¬í˜„_ê³„íš.md) ê²€í†  ë° ì‹¤ë¬´ì  ê°œì„ ë°©ì•ˆ ì œì‹œ  
**ìƒíƒœ**: âœ… ê°œì„ ëœ ì‹¤í–‰ ê³„íš ì™„ì„±

---

## ğŸ“‹ **ê¸°ì¡´ ê³„íš í‰ê°€**

### âœ… **ì˜ ì„¤ê³„ëœ ë¶€ë¶„ë“¤**
1. **ëª…í™•í•œ ìš°ì„ ìˆœìœ„**: Dashboard â†’ Score Library â†’ Setlist Manager â†’ File Upload
2. **API ì—°ê³„ì„±**: Phase 2.3 ë°±ì—”ë“œ APIì™€ ì™„ë²½í•œ ë§¤ì¹­
3. **í˜„ì‹¤ì ì¸ ê¸°ìˆ  ìŠ¤íƒ**: ì´ë¯¸ ì„¤ì¹˜ëœ ë¼ì´ë¸ŒëŸ¬ë¦¬ í™œìš©
4. **ê¸°ëŠ¥ ì¤‘ì‹¬ ì ‘ê·¼**: ì‚¬ìš©ì ì¤‘ì‹¬ì˜ ê¸°ëŠ¥ ì •ì˜

### âš ï¸ **ê°œì„ ì´ í•„ìš”í•œ ë¶€ë¶„ë“¤**

#### 1. **êµ¬í˜„ ë‹¨ê³„ì˜ ì„¸ë¶„í™” ë¶€ì¡±**
- ê° ê¸°ëŠ¥ì´ ë„ˆë¬´ í° ë‹¨ìœ„ë¡œ ì •ì˜ë¨
- ê°œë°œ ì§„í–‰ ìƒí™© ì¶”ì ì˜ ì–´ë ¤ì›€
- ë³‘ë ¬ ê°œë°œ ê°€ëŠ¥ì„± ë¶€ì¡±

#### 2. **ê¸°ìˆ ì  ê¸°ë°˜ ì‘ì—… ëˆ„ë½**
- API í´ë¼ì´ì–¸íŠ¸ ì„¤ì •
- íƒ€ì… ì •ì˜ ì „ëµ
- ì—ëŸ¬ ì²˜ë¦¬ ì‹œìŠ¤í…œ
- ê¸€ë¡œë²Œ ìƒíƒœ ê´€ë¦¬

#### 3. **ë¼ìš°íŒ… ë° ë„¤ë¹„ê²Œì´ì…˜ êµ¬ì¡° ë¯¸ì •ì˜**
- URL êµ¬ì¡° ë¶ˆëª…í™•
- í˜ì´ì§€ ê°„ ì´ë™ íë¦„ ë¯¸ì •ì˜
- ì¸ì¦ ë³´í˜¸ ë¼ìš°íŠ¸ ì „ëµ ë¶€ì¬

---

## ğŸ’¡ **ê°œì„ ëœ êµ¬í˜„ ê³„íš**

### **Phase 0: ê¸°ìˆ ì  ê¸°ë°˜ êµ¬ì¶• (ìƒˆë¡œ ì¶”ê°€)**

#### **0-1. í”„ë¡œì íŠ¸ ê¸°ë°˜ ì„¤ì •**
```typescript
// ì‘ì—… ëª©ë¡
- ë””ë ‰í† ë¦¬ êµ¬ì¡° ì •ì˜
- TypeScript ì„¤ì • ìµœì í™”
- ESLint/Prettier ì„¤ì •
- ì ˆëŒ€ ê²½ë¡œ import ì„¤ì • (@/ alias)
```

#### **0-2. API í´ë¼ì´ì–¸íŠ¸ êµ¬ì¶•**
```typescript
// lib/api.ts
import axios from 'axios';

const api = axios.create({
  baseURL: process.env.NEXT_PUBLIC_API_URL,
  timeout: 10000,
});

// Request interceptor: JWT í† í° ìë™ ì¶”ê°€
api.interceptors.request.use((config) => {
  const token = localStorage.getItem('access_token');
  if (token) {
    config.headers.Authorization = `Bearer ${token}`;
  }
  return config;
});

// Response interceptor: ì—ëŸ¬ ì²˜ë¦¬
api.interceptors.response.use(
  (response) => response,
  (error) => {
    if (error.response?.status === 401) {
      // í† í° ë§Œë£Œ ì‹œ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
      window.location.href = '/auth/login';
    }
    return Promise.reject(error);
  }
);
```

#### **0-3. TypeScript íƒ€ì… ì •ì˜**
```typescript
// types/api.ts
export interface User {
  id: number;
  username: string;
  email: string;
  first_name?: string;
  last_name?: string;
}

export interface Score {
  id: number;
  title: string;
  composer: string;
  tags: string[];
  size_bytes: number;
  page_count?: number;
  has_thumbnail: boolean;
  created_at: string;
  updated_at: string;
  file_url?: string;
}

export interface DashboardData {
  total_scores: number;
  total_setlists: number;
  quota_used_mb: number;
  quota_total_mb: number;
  quota_percentage: number;
  recent_scores: Score[];
  recent_setlists: Setlist[];
  weekly_activity: {
    scores_added: number;
    setlists_created: number;
  };
  quota_recommendations: string[];
}

export interface Setlist {
  id: number;
  name: string;
  description?: string;
  items: SetlistItem[];
  created_at: string;
  updated_at: string;
  total_items: number;
}

export interface SetlistItem {
  id: number;
  score: Score;
  order_index: number;
  notes?: string;
}

// API ì‘ë‹µ ë˜í¼ íƒ€ì…
export interface ApiResponse<T> {
  success: boolean;
  data: T;
  message?: string;
}

export interface PaginatedResponse<T> {
  count: number;
  next: string | null;
  previous: string | null;
  results: T[];
}
```

#### **0-4. ê¸€ë¡œë²Œ ìƒíƒœ ê´€ë¦¬**
```typescript
// contexts/AuthContext.tsx
'use client';
import { createContext, useContext, useEffect, useState } from 'react';

interface AuthContextType {
  user: User | null;
  token: string | null;
  login: (token: string, user: User) => void;
  logout: () => void;
  isLoading: boolean;
}

const AuthContext = createContext<AuthContextType | undefined>(undefined);

export function AuthProvider({ children }: { children: React.ReactNode }) {
  const [user, setUser] = useState<User | null>(null);
  const [token, setToken] = useState<string | null>(null);
  const [isLoading, setIsLoading] = useState(true);

  useEffect(() => {
    // ì´ˆê¸° ë¡œë“œ ì‹œ í† í° í™•ì¸
    const storedToken = localStorage.getItem('access_token');
    const storedUser = localStorage.getItem('user');
    
    if (storedToken && storedUser) {
      setToken(storedToken);
      setUser(JSON.parse(storedUser));
    }
    setIsLoading(false);
  }, []);

  const login = (newToken: string, newUser: User) => {
    localStorage.setItem('access_token', newToken);
    localStorage.setItem('user', JSON.stringify(newUser));
    setToken(newToken);
    setUser(newUser);
  };

  const logout = () => {
    localStorage.removeItem('access_token');
    localStorage.removeItem('user');
    setToken(null);
    setUser(null);
  };

  return (
    <AuthContext.Provider value={{ user, token, login, logout, isLoading }}>
      {children}
    </AuthContext.Provider>
  );
}

export const useAuth = () => {
  const context = useContext(AuthContext);
  if (!context) {
    throw new Error('useAuth must be used within AuthProvider');
  }
  return context;
};
```

#### **0-5. ë¼ìš°íŒ… êµ¬ì¡° ì •ì˜**
```
app/
â”œâ”€â”€ layout.tsx                 # ë£¨íŠ¸ ë ˆì´ì•„ì›ƒ
â”œâ”€â”€ page.tsx                   # í™ˆí˜ì´ì§€ (â†’ /dashboard ë¦¬ë‹¤ì´ë ‰íŠ¸)
â”œâ”€â”€ loading.tsx                # ê¸€ë¡œë²Œ ë¡œë”© UI
â”œâ”€â”€ error.tsx                  # ê¸€ë¡œë²Œ ì—ëŸ¬ UI
â”œâ”€â”€ not-found.tsx             # 404 í˜ì´ì§€
â”‚
â”œâ”€â”€ auth/
â”‚   â”œâ”€â”€ login/
â”‚   â”‚   â””â”€â”€ page.tsx          # ë¡œê·¸ì¸ í˜ì´ì§€
â”‚   â””â”€â”€ register/
â”‚       â””â”€â”€ page.tsx          # íšŒì›ê°€ì… í˜ì´ì§€
â”‚
â”œâ”€â”€ dashboard/
â”‚   â””â”€â”€ page.tsx              # ëŒ€ì‹œë³´ë“œ
â”‚
â”œâ”€â”€ scores/
â”‚   â”œâ”€â”€ page.tsx              # ì•…ë³´ ëª©ë¡
â”‚   â””â”€â”€ [id]/
â”‚       â””â”€â”€ page.tsx          # ì•…ë³´ ìƒì„¸
â”‚
â”œâ”€â”€ setlists/
â”‚   â”œâ”€â”€ page.tsx              # ì„¸íŠ¸ë¦¬ìŠ¤íŠ¸ ëª©ë¡
â”‚   â”œâ”€â”€ new/
â”‚   â”‚   â””â”€â”€ page.tsx          # ìƒˆ ì„¸íŠ¸ë¦¬ìŠ¤íŠ¸ ìƒì„±
â”‚   â””â”€â”€ [id]/
â”‚       â”œâ”€â”€ page.tsx          # ì„¸íŠ¸ë¦¬ìŠ¤íŠ¸ ìƒì„¸
â”‚       â””â”€â”€ edit/
â”‚           â””â”€â”€ page.tsx      # ì„¸íŠ¸ë¦¬ìŠ¤íŠ¸ í¸ì§‘
â”‚
â””â”€â”€ upload/
    â””â”€â”€ page.tsx              # íŒŒì¼ ì—…ë¡œë“œ
```

#### **0-6. ê³µí†µ ì»´í¬ë„ŒíŠ¸ ê¸°ë°˜**
```typescript
// components/ui/Layout.tsx
export function Layout({ children }: { children: React.ReactNode }) {
  return (
    <div className="min-h-screen bg-gray-50">
      <Header />
      <main className="container mx-auto px-4 py-8">
        {children}
      </main>
      <Footer />
    </div>
  );
}

// components/ui/LoadingSpinner.tsx
export function LoadingSpinner({ size = 'md' }: { size?: 'sm' | 'md' | 'lg' }) {
  const sizeClasses = {
    sm: 'h-4 w-4',
    md: 'h-8 w-8', 
    lg: 'h-12 w-12'
  };
  
  return (
    <div className={`animate-spin rounded-full border-2 border-gray-300 border-t-blue-600 ${sizeClasses[size]}`} />
  );
}

// components/ui/ErrorBoundary.tsx
'use client';
import { Component, ErrorInfo, ReactNode } from 'react';

interface Props {
  children: ReactNode;
}

interface State {
  hasError: boolean;
  error?: Error;
}

export class ErrorBoundary extends Component<Props, State> {
  public state: State = {
    hasError: false
  };

  public static getDerivedStateFromError(error: Error): State {
    return { hasError: true, error };
  }

  public componentDidCatch(error: Error, errorInfo: ErrorInfo) {
    console.error('Error caught by boundary:', error, errorInfo);
  }

  public render() {
    if (this.state.hasError) {
      return (
        <div className="min-h-screen flex items-center justify-center">
          <div className="text-center">
            <h2 className="text-2xl font-bold text-gray-900 mb-4">
              ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤
            </h2>
            <p className="text-gray-600 mb-4">
              í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ê±°ë‚˜ ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.
            </p>
            <button
              onClick={() => window.location.reload()}
              className="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700"
            >
              ìƒˆë¡œê³ ì¹¨
            </button>
          </div>
        </div>
      );
    }

    return this.props.children;
  }
}
```

---

### **ê°œì„ ëœ Phase 1: Dashboard (ì„¸ë¶„í™”)**

#### **1-1. ê¸°ë³¸ ë ˆì´ì•„ì›ƒ ë° í†µê³„ ì¹´ë“œ**
```typescript
// ëª©í‘œ: ëŒ€ì‹œë³´ë“œ ê¸°ë³¸ êµ¬ì¡° ë° í•µì‹¬ í†µê³„ í‘œì‹œ
// ì˜ˆìƒ ì†Œìš” ì‹œê°„: 1-2ì¼

// êµ¬í˜„ ë‚´ìš©:
- ëŒ€ì‹œë³´ë“œ í˜ì´ì§€ ë ˆì´ì•„ì›ƒ êµ¬ì„±
- í†µê³„ ì¹´ë“œ ì»´í¬ë„ŒíŠ¸ (ì´ ì•…ë³´ ìˆ˜, ì„¸íŠ¸ë¦¬ìŠ¤íŠ¸ ìˆ˜, ì¿¼í„° ì‚¬ìš©ëŸ‰)
- API ì—°ë™: GET /api/v1/dashboard/
- ë¡œë”©/ì—ëŸ¬ ìƒíƒœ ì²˜ë¦¬
```

#### **1-2. ì¿¼í„° ì‹œê°í™” ì°¨íŠ¸**
```typescript
// ëª©í‘œ: ì¿¼í„° ì‚¬ìš©ëŸ‰ì„ ì‹œê°ì ìœ¼ë¡œ í‘œí˜„
// ì˜ˆìƒ ì†Œìš” ì‹œê°„: 1ì¼

// êµ¬í˜„ ë‚´ìš©:
- rechartsë¥¼ ì´ìš©í•œ ë„ë„› ì°¨íŠ¸ ë˜ëŠ” í”„ë¡œê·¸ë ˆìŠ¤ ë°”
- ì¿¼í„° ì„ë°• ì‹œ ê²½ê³  í‘œì‹œ
- ì¿¼í„° ìƒì„¸ ì •ë³´ íˆ´íŒ
```

#### **1-3. ìµœê·¼ í™œë™ ë° ì¶”ì²œ ì‹œìŠ¤í…œ**
```typescript
// ëª©í‘œ: ì‚¬ìš©ì í™œë™ í”¼ë“œ ë° ì‹œìŠ¤í…œ ê¶Œì¥ì‚¬í•­
// ì˜ˆìƒ ì†Œìš” ì‹œê°„: 1-2ì¼

// êµ¬í˜„ ë‚´ìš©:
- ìµœê·¼ ì¶”ê°€ëœ ì•…ë³´/ì„¸íŠ¸ë¦¬ìŠ¤íŠ¸ ëª©ë¡
- ì£¼ê°„ í™œë™ ìš”ì•½
- ì¿¼í„° ê´€ë ¨ ê¶Œì¥ì‚¬í•­ ì¹´ë“œ
```

### **ê°œì„ ëœ Phase 2: Score Library (ì„¸ë¶„í™”)**

#### **2-1. ê¸°ë³¸ ì•…ë³´ ëª©ë¡ ë° í˜ì´ì§€ë„¤ì´ì…˜**
```typescript
// ëª©í‘œ: ì•…ë³´ ëª©ë¡ì˜ ê¸°ë³¸ í‘œì‹œ ë° í˜ì´ì§€ ì²˜ë¦¬
// ì˜ˆìƒ ì†Œìš” ì‹œê°„: 2ì¼

// êµ¬í˜„ ë‚´ìš©:
- ì•…ë³´ ì¹´ë“œ ì»´í¬ë„ŒíŠ¸ ë””ìì¸
- í˜ì´ì§€ë„¤ì´ì…˜ êµ¬í˜„
- ê¸°ë³¸ ë¡œë”©/ì—ëŸ¬ ìƒíƒœ
- ë°˜ì‘í˜• ê·¸ë¦¬ë“œ ë ˆì´ì•„ì›ƒ
```

#### **2-2. ê²€ìƒ‰ ë° ê¸°ë³¸ í•„í„°ë§**
```typescript
// ëª©í‘œ: í…ìŠ¤íŠ¸ ê²€ìƒ‰ ë° ê¸°ë³¸ í•„í„° êµ¬í˜„
// ì˜ˆìƒ ì†Œìš” ì‹œê°„: 2ì¼

// êµ¬í˜„ ë‚´ìš©:
- ê²€ìƒ‰ë°” ì»´í¬ë„ŒíŠ¸
- íƒœê·¸ í•„í„° (ë‹¤ì¤‘ ì„ íƒ)
- URL ìƒíƒœ ë™ê¸°í™”
- ê²€ìƒ‰ ê²°ê³¼ í•˜ì´ë¼ì´íŒ…
```

#### **2-3. ê³ ê¸‰ í•„í„°ë§ ë° ì •ë ¬**
```typescript
// ëª©í‘œ: ë³µí•© í•„í„° ë° ì •ë ¬ ì˜µì…˜ ì™„ì„±
// ì˜ˆìƒ ì†Œìš” ì‹œê°„: 2-3ì¼

// êµ¬í˜„ ë‚´ìš©:
- íŒŒì¼ í¬ê¸°, í˜ì´ì§€ ìˆ˜ ë²”ìœ„ ìŠ¬ë¼ì´ë”
- ë‚ ì§œ ë²”ìœ„ ì„ íƒê¸°
- ì •ë ¬ ë“œë¡­ë‹¤ìš´ (ì œëª©, ì‘ê³¡ê°€, í¬ê¸°, ë‚ ì§œ ë“±)
- í•„í„° ìƒíƒœ ì €ì¥/ë³µì›
```

#### **2-4. ì•…ë³´ ìƒì„¸ í˜ì´ì§€**
```typescript
// ëª©í‘œ: ê°œë³„ ì•…ë³´ì˜ ìƒì„¸ ì •ë³´ ë° ì•¡ì…˜
// ì˜ˆìƒ ì†Œìš” ì‹œê°„: 1-2ì¼

// êµ¬í˜„ ë‚´ìš©:
- ì•…ë³´ ë©”íƒ€ë°ì´í„° í‘œì‹œ
- ì¸ë„¤ì¼ ì´ë¯¸ì§€ (ìˆëŠ” ê²½ìš°)
- ë‹¤ìš´ë¡œë“œ ë²„íŠ¼
- ì„¸íŠ¸ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€ ë²„íŠ¼
- í¸ì§‘/ì‚­ì œ ì•¡ì…˜
```

### **ê°œì„ ëœ Phase 3: Setlist Manager (ì„¸ë¶„í™”)**

#### **3-1. ì„¸íŠ¸ë¦¬ìŠ¤íŠ¸ ëª©ë¡ ë° CRUD**
```typescript
// ëª©í‘œ: ê¸°ë³¸ì ì¸ ì„¸íŠ¸ë¦¬ìŠ¤íŠ¸ ê´€ë¦¬ ê¸°ëŠ¥
// ì˜ˆìƒ ì†Œìš” ì‹œê°„: 2ì¼

// êµ¬í˜„ ë‚´ìš©:
- ì„¸íŠ¸ë¦¬ìŠ¤íŠ¸ ì¹´ë“œ ë ˆì´ì•„ì›ƒ
- ìƒì„±/ìˆ˜ì •/ì‚­ì œ ëª¨ë‹¬
- í¼ ìœ íš¨ì„± ê²€ì‚¬
- ì˜µí‹°ë¯¸ìŠ¤í‹± ì—…ë°ì´íŠ¸
```

#### **3-2. ì„¸íŠ¸ë¦¬ìŠ¤íŠ¸ ìƒì„¸ ë° ì•…ë³´ ì¶”ê°€**
```typescript
// ëª©í‘œ: ì„¸íŠ¸ë¦¬ìŠ¤íŠ¸ ë‚´ìš© ê´€ë¦¬
// ì˜ˆìƒ ì†Œìš” ì‹œê°„: 2-3ì¼

// êµ¬í˜„ ë‚´ìš©:
- ì„¸íŠ¸ë¦¬ìŠ¤íŠ¸ ë‚´ ì•…ë³´ ëª©ë¡
- ì•…ë³´ ê²€ìƒ‰ ë° ì¶”ê°€ ëª¨ë‹¬
- ì•…ë³´ ì œê±° ê¸°ëŠ¥
- ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸
```

#### **3-3. ë“œë˜ê·¸ì•¤ë“œë¡­ ì¬ì •ë ¬**
```typescript
// ëª©í‘œ: ì§ê´€ì ì¸ ìˆœì„œ ë³€ê²½ ì¸í„°í˜ì´ìŠ¤
// ì˜ˆìƒ ì†Œìš” ì‹œê°„: 2-3ì¼

// êµ¬í˜„ ë‚´ìš©:
- @dnd-kit/sortable êµ¬í˜„
- ë“œë˜ê·¸ ë¯¸ë¦¬ë³´ê¸°
- ìˆœì„œ ë³€ê²½ API ì—°ë™
- ëª¨ë°”ì¼ í„°ì¹˜ ì§€ì›
```

#### **3-4. ì„¸íŠ¸ë¦¬ìŠ¤íŠ¸ ê³ ê¸‰ ê¸°ëŠ¥**
```typescript
// ëª©í‘œ: ë³µì‚¬, ê³µìœ  ë“± ë¶€ê°€ ê¸°ëŠ¥
// ì˜ˆìƒ ì†Œìš” ì‹œê°„: 1-2ì¼

// êµ¬í˜„ ë‚´ìš©:
- ì„¸íŠ¸ë¦¬ìŠ¤íŠ¸ ë³µì‚¬
- ì„¸íŠ¸ë¦¬ìŠ¤íŠ¸ ê³µìœ  URL (ì„ íƒì‚¬í•­)
- ì¼ê´„ ì•¡ì…˜ (ì„ íƒ í•­ëª© ì œê±° ë“±)
```

### **ê°œì„ ëœ Phase 4: File Upload (ì„¸ë¶„í™”)**

#### **4-1. ê¸°ë³¸ íŒŒì¼ ì—…ë¡œë“œ UI**
```typescript
// ëª©í‘œ: ê¸°ë³¸ì ì¸ íŒŒì¼ ì—…ë¡œë“œ ì¸í„°í˜ì´ìŠ¤
// ì˜ˆìƒ ì†Œìš” ì‹œê°„: 2ì¼

// êµ¬í˜„ ë‚´ìš©:
- íŒŒì¼ ì„ íƒ ì¸í„°í˜ì´ìŠ¤
- ë“œë˜ê·¸ì•¤ë“œë¡­ ì¡´
- íŒŒì¼ ë¯¸ë¦¬ë³´ê¸° (ì´ë¦„, í¬ê¸°, íƒ€ì…)
- ê¸°ë³¸ ìœ íš¨ì„± ê²€ì‚¬
```

#### **4-2. ì—…ë¡œë“œ ì§„í–‰ ìƒíƒœ ë° ì—ëŸ¬ ì²˜ë¦¬**
```typescript
// ëª©í‘œ: ì‚¬ìš©ì í”¼ë“œë°± ë° ì—ëŸ¬ ì²˜ë¦¬
// ì˜ˆìƒ ì†Œìš” ì‹œê°„: 2ì¼

// êµ¬í˜„ ë‚´ìš©:
- í”„ë¡œê·¸ë ˆìŠ¤ ë°”
- ì—…ë¡œë“œ ì·¨ì†Œ ê¸°ëŠ¥
- ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
- ì¬ì‹œë„ ë©”ì»¤ë‹ˆì¦˜
```

#### **4-3. ë©”íƒ€ë°ì´í„° ì…ë ¥ ë° ì™„ë£Œ ì²˜ë¦¬**
```typescript
// ëª©í‘œ: ì—…ë¡œë“œ í›„ ë©”íƒ€ë°ì´í„° ê´€ë¦¬
// ì˜ˆìƒ ì†Œìš” ì‹œê°„: 1-2ì¼

// êµ¬í˜„ ë‚´ìš©:
- ì œëª©, ì‘ê³¡ê°€, íƒœê·¸ ì…ë ¥ í¼
- ìë™ ë©”íƒ€ë°ì´í„° ì¶”ì¶œ (ê°€ëŠ¥í•œ ê²½ìš°)
- ì—…ë¡œë“œ ì™„ë£Œ í›„ ë¦¬ë‹¤ì´ë ‰íŠ¸
- ì„±ê³µ ì•Œë¦¼ í† ìŠ¤íŠ¸
```

---

## ğŸ› ï¸ **ì¶”ê°€ ê¸°ìˆ ì  ê°œì„ ì‚¬í•­**

### **1. ì—ëŸ¬ ì²˜ë¦¬ ì „ëµ**

#### **í† ìŠ¤íŠ¸ ì•Œë¦¼ ì‹œìŠ¤í…œ**
```typescript
// lib/toast.ts
import { toast } from 'react-hot-toast';

export const showSuccess = (message: string) => {
  toast.success(message, {
    duration: 4000,
    position: 'top-right',
  });
};

export const showError = (message: string) => {
  toast.error(message, {
    duration: 6000,
    position: 'top-right',
  });
};

export const showLoading = (message: string) => {
  return toast.loading(message, {
    position: 'top-right',
  });
};
```

#### **API ì—ëŸ¬ ì²˜ë¦¬ í‘œì¤€í™”**
```typescript
// lib/api-error.ts
export class ApiError extends Error {
  constructor(
    public status: number,
    public message: string,
    public details?: any
  ) {
    super(message);
    this.name = 'ApiError';
  }
}

export const handleApiError = (error: any): string => {
  if (error instanceof ApiError) {
    return error.message;
  }
  
  if (error.response?.data?.message) {
    return error.response.data.message;
  }
  
  if (error.message) {
    return error.message;
  }
  
  return 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.';
};
```

### **2. ì„±ëŠ¥ ìµœì í™”**

#### **ì´ë¯¸ì§€ ìµœì í™”**
```typescript
// components/ui/OptimizedImage.tsx
import Image from 'next/image';
import { useState } from 'react';

interface OptimizedImageProps {
  src: string;
  alt: string;
  width: number;
  height: number;
  className?: string;
}

export function OptimizedImage({ src, alt, width, height, className }: OptimizedImageProps) {
  const [isLoading, setIsLoading] = useState(true);
  const [hasError, setHasError] = useState(false);

  if (hasError) {
    return (
      <div className={`bg-gray-200 flex items-center justify-center ${className}`}>
        <span className="text-gray-500">ì´ë¯¸ì§€ ë¡œë“œ ì‹¤íŒ¨</span>
      </div>
    );
  }

  return (
    <div className={`relative ${className}`}>
      {isLoading && (
        <div className="absolute inset-0 bg-gray-200 animate-pulse" />
      )}
      <Image
        src={src}
        alt={alt}
        width={width}
        height={height}
        onLoadingComplete={() => setIsLoading(false)}
        onError={() => setHasError(true)}
        className={`transition-opacity duration-200 ${
          isLoading ? 'opacity-0' : 'opacity-100'
        }`}
      />
    </div>
  );
}
```

#### **ë¬´í•œ ìŠ¤í¬ë¡¤ (ì˜µì…˜)**
```typescript
// hooks/useInfiniteScroll.ts
import { useInfiniteQuery } from '@tanstack/react-query';
import { useEffect } from 'react';
import { useIntersection } from '@mantine/hooks';

interface UseInfiniteScrollOptions<T> {
  queryKey: string[];
  queryFn: (page: number) => Promise<PaginatedResponse<T>>;
  enabled?: boolean;
}

export function useInfiniteScroll<T>({ 
  queryKey, 
  queryFn, 
  enabled = true 
}: UseInfiniteScrollOptions<T>) {
  const {
    data,
    fetchNextPage,
    hasNextPage,
    isFetchingNextPage,
    isLoading,
    error,
  } = useInfiniteQuery({
    queryKey,
    queryFn: ({ pageParam = 1 }) => queryFn(pageParam),
    getNextPageParam: (lastPage, pages) => {
      return lastPage.next ? pages.length + 1 : undefined;
    },
    enabled,
  });

  const { ref, entry } = useIntersection({
    threshold: 1,
  });

  useEffect(() => {
    if (entry?.isIntersecting && hasNextPage && !isFetchingNextPage) {
      fetchNextPage();
    }
  }, [entry, fetchNextPage, hasNextPage, isFetchingNextPage]);

  const items = data?.pages.flatMap(page => page.results) ?? [];

  return {
    items,
    isLoading,
    error,
    isFetchingNextPage,
    loadMoreRef: ref,
    hasNextPage,
  };
}
```

### **3. ì ‘ê·¼ì„± ë° SEO**

#### **ë©”íƒ€ë°ì´í„° ì„¤ì •**
```typescript
// app/dashboard/page.tsx
import { Metadata } from 'next';

export const metadata: Metadata = {
  title: 'ëŒ€ì‹œë³´ë“œ | ScoreMate',
  description: 'ì•…ë³´ ë¼ì´ë¸ŒëŸ¬ë¦¬ í˜„í™©ê³¼ ì¿¼í„° ì‚¬ìš©ëŸ‰ì„ í•œëˆˆì— í™•ì¸í•˜ì„¸ìš”.',
};

export default function DashboardPage() {
  // ...
}
```

#### **í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜**
```typescript
// hooks/useKeyboardNavigation.ts
import { useEffect } from 'react';

export function useKeyboardNavigation(
  items: any[],
  selectedIndex: number,
  onSelect: (index: number) => void,
  onEnter?: (item: any) => void
) {
  useEffect(() => {
    const handleKeyDown = (event: KeyboardEvent) => {
      switch (event.key) {
        case 'ArrowDown':
          event.preventDefault();
          onSelect(Math.min(selectedIndex + 1, items.length - 1));
          break;
        case 'ArrowUp':
          event.preventDefault();
          onSelect(Math.max(selectedIndex - 1, 0));
          break;
        case 'Enter':
          if (onEnter && items[selectedIndex]) {
            event.preventDefault();
            onEnter(items[selectedIndex]);
          }
          break;
      }
    };

    document.addEventListener('keydown', handleKeyDown);
    return () => document.removeEventListener('keydown', handleKeyDown);
  }, [items, selectedIndex, onSelect, onEnter]);
}
```

---

## ğŸ“Š **ê°œì„ ëœ ê°œë°œ ì¼ì • ì˜ˆìƒ**

### **ì „ì²´ ì¼ì •: 3-4ì£¼**

| Phase | ê¸°ëŠ¥ | ì˜ˆìƒ ì†Œìš” | ìš°ì„ ë„ |
|-------|------|-----------|--------|
| **Phase 0** | ê¸°ìˆ ì  ê¸°ë°˜ êµ¬ì¶• | 3-4ì¼ | ğŸ”¥ í•„ìˆ˜ |
| **Phase 1-1** | Dashboard ê¸°ë³¸ | 1-2ì¼ | ğŸ”¥ í•„ìˆ˜ |
| **Phase 1-2** | Dashboard ì°¨íŠ¸ | 1ì¼ | â­ ê¶Œì¥ |
| **Phase 1-3** | Dashboard ê³ ê¸‰ | 1-2ì¼ | â­ ê¶Œì¥ |
| **Phase 2-1** | ì•…ë³´ ëª©ë¡ ê¸°ë³¸ | 2ì¼ | ğŸ”¥ í•„ìˆ˜ |
| **Phase 2-2** | ê²€ìƒ‰/ê¸°ë³¸ í•„í„° | 2ì¼ | ğŸ”¥ í•„ìˆ˜ |
| **Phase 2-3** | ê³ ê¸‰ í•„í„°/ì •ë ¬ | 2-3ì¼ | â­ ê¶Œì¥ |
| **Phase 2-4** | ì•…ë³´ ìƒì„¸ í˜ì´ì§€ | 1-2ì¼ | â­ ê¶Œì¥ |
| **Phase 3-1** | ì„¸íŠ¸ë¦¬ìŠ¤íŠ¸ CRUD | 2ì¼ | ğŸ”¥ í•„ìˆ˜ |
| **Phase 3-2** | ì•…ë³´ ì¶”ê°€/ì œê±° | 2-3ì¼ | ğŸ”¥ í•„ìˆ˜ |
| **Phase 3-3** | ë“œë˜ê·¸ì•¤ë“œë¡­ | 2-3ì¼ | â­ ê¶Œì¥ |
| **Phase 3-4** | ì„¸íŠ¸ë¦¬ìŠ¤íŠ¸ ê³ ê¸‰ | 1-2ì¼ | ğŸ“Œ ì„ íƒ |
| **Phase 4-1** | ì—…ë¡œë“œ UI ê¸°ë³¸ | 2ì¼ | ğŸ”¥ í•„ìˆ˜ |
| **Phase 4-2** | ì§„í–‰ìƒíƒœ/ì—ëŸ¬ | 2ì¼ | â­ ê¶Œì¥ |
| **Phase 4-3** | ë©”íƒ€ë°ì´í„° ì…ë ¥ | 1-2ì¼ | â­ ê¶Œì¥ |

### **MVP (ìµœì†Œ ê¸°ëŠ¥ ì œí’ˆ) - 2ì£¼**
- Phase 0 (ê¸°ë°˜ êµ¬ì¶•)
- Phase 1-1 (ê¸°ë³¸ ëŒ€ì‹œë³´ë“œ)
- Phase 2-1, 2-2 (ê¸°ë³¸ ì•…ë³´ ê´€ë¦¬)
- Phase 3-1, 3-2 (ê¸°ë³¸ ì„¸íŠ¸ë¦¬ìŠ¤íŠ¸)
- Phase 4-1 (ê¸°ë³¸ ì—…ë¡œë“œ)

### **Full Feature - 3-4ì£¼**
- ëª¨ë“  Phase í¬í•¨
- ì¶”ê°€ ìµœì í™” ë° í…ŒìŠ¤íŠ¸

---

## ğŸ¯ **ì‹¤í–‰ ê¶Œì¥ì‚¬í•­**

### **1. ê°œë°œ ìˆœì„œ**
```
1ì£¼ì°¨: Phase 0 + Phase 1 (ê¸°ë°˜ + ëŒ€ì‹œë³´ë“œ)
2ì£¼ì°¨: Phase 2 (ì•…ë³´ ë¼ì´ë¸ŒëŸ¬ë¦¬)
3ì£¼ì°¨: Phase 3 (ì„¸íŠ¸ë¦¬ìŠ¤íŠ¸ ê´€ë¦¬)
4ì£¼ì°¨: Phase 4 (íŒŒì¼ ì—…ë¡œë“œ) + ìµœì í™”
```

### **2. ë³‘ë ¬ ê°œë°œ ê°€ëŠ¥ ì˜ì—­**
- UI ì»´í¬ë„ŒíŠ¸ì™€ API í†µì‹  ë¡œì§
- ê° í˜ì´ì§€ì˜ ë…ë¦½ì  ê¸°ëŠ¥ë“¤
- ê³µí†µ ì»´í¬ë„ŒíŠ¸ì™€ í˜ì´ì§€ë³„ ê¸°ëŠ¥

### **3. í…ŒìŠ¤íŠ¸ ì „ëµ**
```typescript
// ë‹¨ìœ„ í…ŒìŠ¤íŠ¸: ê°œë³„ ì»´í¬ë„ŒíŠ¸ ë° í›…
// í†µí•© í…ŒìŠ¤íŠ¸: API í†µì‹  ë° ìƒíƒœ ê´€ë¦¬
// E2E í…ŒìŠ¤íŠ¸: ì£¼ìš” ì‚¬ìš©ì í”Œë¡œìš°
```

---

## ğŸš€ **ë‹¤ìŒ ë‹¨ê³„**

### **ì¦‰ì‹œ ì‹œì‘í•  ìˆ˜ ìˆëŠ” ì‘ì—…**
1. **Phase 0 ì‹¤í–‰**: í”„ë¡œì íŠ¸ ê¸°ë°˜ êµ¬ì¶• (3-4ì¼)
2. **ë””ìì¸ ì‹œìŠ¤í…œ**: Tailwind ì»¤ìŠ¤í…€ ì„¤ì • ë° ì»´í¬ë„ŒíŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬
3. **API ëª© ë°ì´í„°**: ê°œë°œ ì¤‘ ì‚¬ìš©í•  í…ŒìŠ¤íŠ¸ ë°ì´í„° ì¤€ë¹„

### **ë°±ì—”ë“œ ì—°ë™ ì¤€ë¹„**
1. **CORS ì„¤ì • í™•ì¸**: ë¡œì»¬ ê°œë°œ í™˜ê²½ì—ì„œì˜ API ì ‘ê·¼
2. **API ë¬¸ì„œí™”**: í”„ë¡ íŠ¸ì—”ë“œ íŒ€ì„ ìœ„í•œ API ëª…ì„¸ì„œ
3. **ì—ëŸ¬ ì‘ë‹µ í‘œì¤€í™”**: ì¼ê´€ëœ ì—ëŸ¬ ë©”ì‹œì§€ í˜•ì‹

---

**ê²°ë¡ **: ì´ ê°œì„ ëœ ê³„íšì„ í†µí•´ **ì²´ê³„ì ì´ê³  ë‹¨ê³„ì ì¸ í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œ**ì´ ê°€ëŠ¥í•˜ë©°, **2ì£¼ ë‚´ MVP, 4ì£¼ ë‚´ ì™„ì „í•œ ê¸°ëŠ¥**ì„ êµ¬í˜„í•  ìˆ˜ ìˆì„ ê²ƒìœ¼ë¡œ ì˜ˆìƒë©ë‹ˆë‹¤.

---

**ë‹¤ìŒ ë¬¸ì„œ**: Next.js í”„ë¡ íŠ¸ì—”ë“œ Phase 0 êµ¬í˜„ ì‹œì‘  
**ì°¸ê³  ë¬¸ì„œ**: [ì›ë³¸ ê³„íšì„œ](./20250819_023_Next.js_í”„ë¡ íŠ¸ì—”ë“œ_í•µì‹¬_ê¸°ëŠ¥_êµ¬í˜„_ê³„íš.md)